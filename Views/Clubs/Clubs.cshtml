@model IEnumerable<MyField.Models.Club>

@{
    ViewData["Title"] = "Clubs";
    Layout = "~/Views/Shared/_PagesLayout.cshtml";
}

<br />
@await Html.PartialAsync("_BackButton")
<h4 class="text-center">PARTICIPATING CLUBS</h4>
<br />
<div class="container">
    <div class="row">
        <div class="col-auto">
            <input type="text" id="searchInput" class="form-control" placeholder="Search club...">
        </div>
        <div class="col-auto">
            <a href="@Url.Action("Create")" class="btn  btn-outline-primary btn-create">
                <i class="fas fa-plus"></i> Create new
            </a>
        </div>
    </div>
</div>


<br />

<div class="table-responsive">
    <table class="table table-striped table-borderless">
        <thead>
            <tr style="color:white;background-color: #324260; white-space: nowrap;">
                <th style="white-space: nowrap;">Name</th>
                <th style="white-space: nowrap;"> Manager</th>
                <th style="white-space: nowrap;">Location</th>
                <th style="white-space: nowrap;">Stadium</th>
                <th style="white-space: nowrap;">No. of Players</th>
                <th style="white-space: nowrap;">Status</th>
                <th style="white-space: nowrap;">CreatedBy</th>
                <th style="white-space: nowrap;">CreatedDateTime</th>
                <th style="white-space: nowrap;">ModifiedBy</th>
                <th style="white-space: nowrap;">ModifiedDateTime</th>
                <th style="white-space: nowrap;">Actions</th>
                <th style="white-space: nowrap;">More Info.</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr class="ellipsis">
                    <td class="column-max-width">
                        <img src="~/@item.ClubBadge" alt="@item.ClubName" class="club-badge-image" style="margin-right: 20px;" />
                        @Html.DisplayFor(modelItem => item.ClubName) (@Html.DisplayFor(modelItem => item.ClubAbbr))
                    </td>
                    <td class="column-max-width">
                    @ViewBag.Clubmanager
                    </td>
                    <td class="column-max-width">
                        @Html.DisplayFor(modelItem => item.ClubLocation)
                    </td>
                    <td class="column-max-width">Stadium</td>
                    <td class="column-max-width">NO. Players</td>
                    <td class="column-max-width">Status</td>
                    <td class="column-max-width">   @Html.DisplayFor(modelItem => item.CreatedBy.FirstName) @Html.DisplayFor(modelItem => item.CreatedBy.LastName)
                    <td class="column-max-width">   @Html.DisplayFor(modelItem => item.CreatedDateTime)</td>
                    <td class="column-max-width">   @Html.DisplayFor(modelItem => item.ModifiedBy.FirstName) @Html.DisplayFor(modelItem => item.ModifiedBy.LastName)</td>
                    <td class="column-max-width">   @Html.DisplayFor(modelItem => item.ModifiedDateTime)</td>
                    <td class="column-max-width">Actions</td>
                    <td style="white-space: nowrap;">
                        <a href="@Url.Action("Details", "Clubs", new { id = item.ClubId })" class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-info-circle" style="color: #2E5A88;"></i>
                            Details
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $("#searchInput").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $(".clubs-table tbody tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });
</script>
